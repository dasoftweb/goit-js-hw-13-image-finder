(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{FHl3:function(e,t,n){var o=n("mp5j");e.exports=(o.default||o).template({1:function(e,t,n,o,r){var i=e.lambda,a=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item">\r\n    <div class="photo-card">\r\n        <img src="'+a(i(null!=t?s(t,"webformatURL"):t,t))+'" data-source="'+a(i(null!=t?s(t,"largeImageURL"):t,t))+'" alt="'+a(i(null!=t?s(t,"tags"):t,t))+'" />\r\n\r\n        <div class="stats">\r\n            <p class="stats-item">\r\n                <i class="material-icons">thumb_up</i>\r\n                '+a(i(null!=t?s(t,"likes"):t,t))+'\r\n            </p>\r\n            <p class="stats-item">\r\n                <i class="material-icons">visibility</i>\r\n                '+a(i(null!=t?s(t,"views"):t,t))+'\r\n            </p>\r\n            <p class="stats-item">\r\n                <i class="material-icons">comment</i>\r\n                '+a(i(null!=t?s(t,"comments"):t,t))+'\r\n            </p>\r\n            <p class="stats-item">\r\n                <i class="material-icons">cloud_download</i>\r\n                '+a(i(null!=t?s(t,"downloads"):t,t))+"\r\n            </p>\r\n        </div>\r\n    </div>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,o,r){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:26,column:9}}}))?i:""},useData:!0})},L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("Muwe"),n("X5mX"),n("L1EO"),n("9va6"),n("JBxO"),n("FdtR"),n("wcNg");var o="https://pixabay.com/api/",r="20663729-402ac0755ef01966534e76e9d",i=n("FHl3"),a=n.n(i);function s(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}var l=o,c=r,u=function(){function e(e){this.galleryRef=document.querySelector(e),this.lightboxRef=document.querySelector(".js-lightbox"),this.lightboxImageRef=document.querySelector(".lightbox__image"),this.lightboxOverlayRef=document.querySelector(".lightbox__overlay"),this.lightboxCloseRef=document.querySelector('button[data-action="close-lightbox"]'),this.moreButtonRef=document.querySelector(".more"),this.currentPage=1,this.totalPages=0,this.query="",this.per_page=12,this.loadMore=this.loadMore.bind(this)}var t=e.prototype;return t.onGalleryClick=function(e){if(e.preventDefault(),"IMG"===e.target.nodeName){console.log("Click on gallery");var t=e.target,n=t.dataset.source,o=t.alt;console.log(n),this.setLightboxImage(n,o),this.openModal()}},t.openModal=function(){this.lightboxRef.classList.add("is-open")},t.closeModal=function(){this.lightboxRef.classList.remove("is-open"),this.removeLightboxImage()},t.setLightboxImage=function(e,t){this.lightboxImageRef.src=e,this.lightboxImageRef.alt=t},t.removeLightboxImage=function(){this.lightboxImageRef.src="",this.lightboxImageRef.alt=""},t.search=function(e){var t=this;e&&(this.query!=e&&(this.query=e,this.currentPage=1,this.totalPages=0),console.log("NEW QUERY"),console.log("Load Page: "+this.currentPage),this.fetchImages(e,this.currentPage).then((function(e){t.renderImages(e.hits),t.totalPages=e.totalHits/t.per_page,e.totalHits/t.per_page>t.currentPage&&t.renderLoadMoreButton()})),this.galleryRef.addEventListener("click",this.onGalleryClick.bind(this)),this.lightboxOverlayRef.addEventListener("click",this.closeModal.bind(this)),this.lightboxCloseRef.addEventListener("click",this.closeModal.bind(this)))},t.loadMore=function(){var e=this;this.query&&(this.totalPages<=this.currentPage||(this.currentPage+=1,console.log("Load Page: "+this.currentPage),this.fetchImages(this.query,this.currentPage).then((function(t){e.renderImages(t.hits)}))))},t.renderLoadMoreButton=function(){this.moreButtonRef.innerHTML='<button id="load-more" class="load-more">LOAD MORE</button>',document.querySelector("#load-more").addEventListener("click",this.loadMore)},t.fetchImages=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var o,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l+"?image_type=photo&orientation=horizontal&q="+t+"&page="+n+"&per_page="+this.per_page+"&key="+c,e.next=3,fetch(o);case 3:return r=e.sent,i=r.json(),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){s(i,o,r,a,l,"next",e)}function l(e){s(i,o,r,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),t.renderImages=function(e){this.galleryRef.insertAdjacentHTML("beforeend",a()(e)),this.scrollAfterRender()},t.scrollAfterRender=function(){window.scrollTo({top:window.scrollY+window.innerHeight,behavior:"smooth"})},e}(),h=(n("Anew"),new u(".gallery")),d=document.querySelector('input[name="query"]'),g=document.querySelector(".gallery-load-observer");d.addEventListener("input",_.debounce((function(){h.search(d.value)}),1e3));var m=_.debounce((function(){console.log("Сработал Обс"),h.loadMore()}),500);new IntersectionObserver(m).observe(g)}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.ba3c663445cfbd7e104a.js.map