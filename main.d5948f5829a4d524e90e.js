(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{FHl3:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,i){var o=e.lambda,a=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item">\r\n    <div class="photo-card">\r\n        <img src="'+a(o(null!=t?s(t,"webformatURL"):t,t))+'" data-source="'+a(o(null!=t?s(t,"largeImageURL"):t,t))+'" alt="'+a(o(null!=t?s(t,"tags"):t,t))+'" />\r\n\r\n        <div class="stats">\r\n            <p class="stats-item">\r\n                <i class="material-icons">thumb_up</i>\r\n                '+a(o(null!=t?s(t,"likes"):t,t))+'\r\n            </p>\r\n            <p class="stats-item">\r\n                <i class="material-icons">visibility</i>\r\n                '+a(o(null!=t?s(t,"views"):t,t))+'\r\n            </p>\r\n            <p class="stats-item">\r\n                <i class="material-icons">comment</i>\r\n                '+a(o(null!=t?s(t,"comments"):t,t))+'\r\n            </p>\r\n            <p class="stats-item">\r\n                <i class="material-icons">cloud_download</i>\r\n                '+a(o(null!=t?s(t,"downloads"):t,t))+"\r\n            </p>\r\n        </div>\r\n    </div>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:26,column:9}}}))?o:""},useData:!0})},L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("Muwe"),n("X5mX"),n("L1EO"),n("9va6"),n("hi3g"),n("/YXa"),n("JBxO"),n("FdtR"),n("WoWj"),n("qoNQ"),n("U00V"),n("wcNg");var r="https://pixabay.com/api/",i="20663729-402ac0755ef01966534e76e9d",o=n("FHl3"),a=n.n(o);function s(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var u=r,h=i,g=new WeakMap,p=function(){function e(e){g.set(this,{writable:!0,value:[]}),this.galleryRef=document.querySelector(e),this.lightboxRef=document.querySelector(".js-lightbox"),this.lightboxImageRef=document.querySelector(".lightbox__image"),this.lightboxOverlayRef=document.querySelector(".lightbox__overlay"),this.lightboxCloseRef=document.querySelector('button[data-action="close-lightbox"]'),this.currentPage=1,this.totalPages=0,c(this,g,[]),this.query="",this.per_page=12,this.loadMore=this.loadMore.bind(this)}var t,n,r,i=e.prototype;return i.onGalleryClick=function(e){if(e.preventDefault(),"IMG"===e.target.nodeName){console.log("Click on gallery");var t=e.target,n=t.dataset.source,r=t.alt;console.log(n),this.setLightboxImage(n,r),this.openModal()}},i.openModal=function(){this.lightboxRef.classList.add("is-open")},i.closeModal=function(){this.lightboxRef.classList.remove("is-open"),this.removeLightboxImage()},i.setLightboxImage=function(e,t){this.lightboxImageRef.src=e,this.lightboxImageRef.alt=t},i.removeLightboxImage=function(){this.lightboxImageRef.src="",this.lightboxImageRef.alt=""},i.search=function(e){var t=this;e&&(this.query!=e&&(this.query=e,this.currentPage=1,this.totalPages=0),console.log("NEW QUERY"),console.log("Load Page: "+this.currentPage),this.fetchImages(e,this.currentPage).then((function(e){t.images=e.hits,t.totalPages=e.totalHits/t.per_page})))},i.loadMore=function(){var e=this;this.query&&(this.totalPages<=this.currentPage||(this.currentPage+=1,console.log("Load Page: "+this.currentPage),this.fetchImages(this.query,this.currentPage).then((function(t){e.addImages(t.hits)}))))},i.addImages=function(e){this.images=[].concat(this.images,e)},i.fetchImages=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u+"?image_type=photo&orientation=horizontal&q="+t+"&page="+n+"&per_page="+this.per_page+"&key="+h,e.next=3,fetch(r);case 3:return i=e.sent,o=i.json(),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,l,"next",e)}function l(e){s(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),i.renderImages=function(){this.galleryRef.innerHTML=a()(this.images)},t=e,(n=[{key:"images",get:function(){return function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}(this,g)},set:function(e){c(this,g,e),this.renderImages(),this.galleryRef.addEventListener("click",this.onGalleryClick.bind(this)),this.lightboxOverlayRef.addEventListener("click",this.closeModal.bind(this)),this.lightboxCloseRef.addEventListener("click",this.closeModal.bind(this))}}])&&l(t.prototype,n),r&&l(t,r),e}(),f=(n("Anew"),new p(".gallery")),d=document.querySelector('input[name="query"]'),m=document.querySelector(".gallery-load-observer");d.addEventListener("input",_.debounce((function(){f.search(d.value)}),1e3));var v=_.debounce((function(){console.log("Сработал Обс"),f.loadMore()}),500);new IntersectionObserver(v).observe(m)}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.d5948f5829a4d524e90e.js.map